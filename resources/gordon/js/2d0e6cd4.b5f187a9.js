(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0e6cd4"],{"99fd":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{attrs:{padding:""}},[t.data?t._e():a("div",[a("h3",{staticClass:"text-negative"},[t._v("ERROR: Unknown Gekko instance")]),a("p",[t._v("Gekko doesn't know what watcher this is!")])]),t.data?[t.isArchived?a("q-alert",{staticClass:"q-pb-sm",attrs:{type:"warning",icon:"warning"}},[t._v("\n      This is an archived Gekko. It's currently not running anymore.\n    ")]):t._e(),t.data.errorMessage?a("q-alert",{staticClass:"q-pb-sm",attrs:{type:"negative",icon:"error"}},[a("p",[t._v("This Gekko crashed with the following error-message: "),a("br"),a("br"),t._v(t._s(t.data.errorMessage))])]):t._e(),a("div",{staticClass:"row items-center justify-center",class:{"bg-green-11":t.latestEvents.performanceReport&&t.latestEvents.performanceReport.profit>0,"bg-red-11":t.latestEvents.performanceReport&&t.latestEvents.performanceReport.profit<0}},[a("div",{staticClass:"q-display-1"},[t._v("\n        Gekko "),a("strong",[t._v(t._s(t.type.toUpperCase()))]),t._v(", on "),a("strong",[t._v(t._s(t.data.config.watch.exchange))]),t._v(" - trading\n        "),a("strong",[a("em",[t._v(t._s(t.data.config.watch.currency)+" - "+t._s(t.data.config.watch.asset))])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-center"},[a("q-btn",{staticClass:"q-ma-xs",attrs:{color:"orange",icon:"stop",label:"Stop Gekko",disabled:t.isArchived},nativeOn:{click:function(e){return t.stopGekko(e)}}}),a("q-btn",{staticClass:"q-ma-xs",attrs:{color:"negative",icon:"delete",label:"Delete Gekko",disabled:!t.isArchived},nativeOn:{click:function(e){return t.deleteGekko(e)}}}),t.isStratrunner&&t.watcher&&!t.isArchived?a("p",{staticClass:"q-ma-sm"},[a("em",[t._v("This Gekko gets market data from\n          "),a("router-link",{attrs:{to:"/live-gekkos/"+t.watcher.id}},[t._v("this")]),t._v("\n          market watcher.")],1)]):t._e()],1)]),a("q-tabs",{attrs:{align:"justify",animated:"",color:"blue-grey-8"}},[a("q-tab",{attrs:{slot:"title",default:"",label:"runtime",name:"runtime-tab",icon:"timer"},slot:"title"}),t.isStratrunner?a("q-tab",{attrs:{slot:"title",label:"profit",name:"profit-tab",icon:"trending_up"},slot:"title"}):t._e(),a("q-tab",{attrs:{slot:"title",label:"strategy",name:"strategy-tab",icon:"multiline_chart"},slot:"title"}),a("q-tab-pane",{staticClass:"bg-blue-grey-1",attrs:{name:"runtime-tab"}},[t.warmupRemaining?a("q-alert",{staticClass:"q-pa-md",attrs:{type:"warning",icon:"warning"}},[a("p",[t._v("This stratrunner is still warming up for the next "),a("br"),t._v("\n            "+t._s(t.warmupRemaining.replace(","," and "))+" "),a("br"),t._v("\n            , it will not trade until it is warmed up.")])]):t._e(),t.isLoading?a("div",{staticClass:"row gutter-xs"},[a("div",{staticClass:"col text-center"},[a("q-spinner-bars",{attrs:{size:"36",color:"tertiary"}})],1)]):t._e(),!t.isLoading&&t.initialEvents.candle?a("div",{staticClass:"row gutter-xs"},[a("div",{staticClass:"col"},[a("strong",[t._v("Watching since:")])]),a("div",{staticClass:"col"},[t._v(t._s(t.fmt(t.initialEvents.candle.start)))])]):t._e(),!t.isLoading&&t.latestEvents.candle?a("div",{staticClass:"row gutter-xs"},[a("div",{staticClass:"col"},[a("strong",[t._v("Received data until:")])]),a("div",{staticClass:"col"},[t._v(t._s(t.fmt(t.latestEvents.candle.start)))])]):t._e(),!t.isLoading&&t.data.events.initial.candle?a("div",{staticClass:"row gutter-xs"},[a("div",{staticClass:"col"},[a("strong",[t._v("Data spanning:")])]),a("div",{staticClass:"col"},[t._v(t._s(t.dataSpanning))])]):t._e(),t.isStratrunner?[!t.isLoading&&t.trades.length?a("div",{staticClass:"row gutter-xs"},[a("div",{staticClass:"col"},[a("strong",[t._v("Amount of trades:")])]),a("div",{staticClass:"col"},[t._v("\n              "+t._s(t.trades.length)+"\n            ")])]):t._e(),a("div",{staticClass:"row gutter-xs"},[a("div",{staticClass:"col"},[a("strong",[t._v("Latest Trade:")])]),t.lastCompletedTrade?a("div",{staticClass:"col"},[t._v(t._s(t.lastCompletedTrade.action)+" "),a("strong",[t._v(t._s(t.lastCompletedTrade.amount.toFixed(8)))]),t._v("\n              "+t._s(t.data.config.watch.asset)+"\n              "),a("br"),t._v("at "),a("strong",[t._v(t._s(t.lastCompletedTrade.effectivePrice.toFixed(8)))]),t._v(" "+t._s(t.data.config.watch.currency)+"\n            ")]):t._e()]),!t.isLoading&&t.latestEvents.advice?a("div",{staticClass:"row gutter-xs"},[a("div",{staticClass:"col"},[a("strong",[t._v("Last Advice")])]),a("div",{staticClass:"col"},[a("b",[t._v(t._s(t.latestEvents.advice.recommendation))])])]):t._e()]:t._e()],2),t.isStratrunner?a("q-tab-pane",{staticClass:"bg-blue-grey-1",attrs:{name:"profit-tab"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("p",[t.isArchived&&!t.report?a("em",[t._v("\n                This Gekko never executed a trade.\n              ")]):t._e(),t.isArchived||t.report?t._e():a("em",[t._v("\n                Waiting for at least one trade.\n              ")])])])]),t.report?[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("strong",[t._v("Start balance:")])]),a("div",{staticClass:"col"},[t._v(" "+t._s(t.round(t.report.startBalance)))])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("strong",[t._v("Current balance:")])]),a("div",{staticClass:"col"},[t._v(" "+t._s(t.round(t.report.balance)))])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("strong",[t._v("Market:")])]),a("div",{staticClass:"col"},[t._v(" "+t._s(t.round(t.report.market/100*t.report.startPrice))+" "+t._s(t.config.watch.currency)+"\n              ("+t._s(t.round(t.report.market))+" %)\n            ")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("strong",[t._v("Profit:")])]),a("div",{staticClass:"col"},[t._v(" "+t._s(t.round(t.report.profit))+" "+t._s(t.config.watch.currency)+"\n              ("+t._s(t.round(t.report.relativeProfit))+" %)\n            ")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("strong",[t._v("Alpha:")])]),a("div",{staticClass:"col"},[t._v(" "+t._s(t.round(t.report.alpha))+" "+t._s(t.config.watch.currency))])])]:t._e()],2):t._e(),a("q-tab-pane",{staticClass:"bg-blue-grey-1",attrs:{name:"strategy-tab"}},[t.isStratrunner?[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("strong",[t._v("Name:")])]),a("div",{staticClass:"col"},[t._v(t._s(t.stratName))])]),!t.isLoading&&t.config.tradingAdvisor?a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("strong",[t._v("Candle size:")])]),a("div",{staticClass:"col"},[a("strong",[t._v(t._s(t.config.tradingAdvisor.candleSize||"n/a"))]),t._v(" minutes")])]):t._e(),!t.isLoading&&t.config.tradingAdvisor?a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("strong",[t._v("History size:")])]),a("div",{staticClass:"col"},[a("strong",[t._v(t._s(t.historySize))]),t._v("\n                  minutes "+t._s(t.historyFormula)+"\n                  ")])]):t._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("strong",[t._v("Parameters:")])]),a("div",{staticClass:"col"},[a("q-scroll-area",{staticClass:"bg-blue-grey-11",staticStyle:{height:"200px"}},[a("pre",[t._v(t._s(t.stratParams))])])],1)])])])]:t._e()],2)],1),!t.isStratrunner||t.watcher||t.isArchived?t._e():a("q-alert",{staticClass:"q-pa-md",attrs:{type:"warning",icon:"warning"}},[a("p",[t._v("WARNING: stale Gekko, not attached to a watcher, please report an\n        "),a("a",{attrs:{href:"https://github.com/askmike/gekko/issues"}},[t._v("issue")]),t._v(" here.")])]),t.isLoading?t._e():a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},["fetching"===t.candleFetch?a("q-spinner-bars",{attrs:{color:"tertiary",size:"48"}}):t._e(),"fetched"===t.candleFetch?a("echart",{attrs:{candles:t.candles,trades:t.trades,height:"500"}}):t._e()],1)]),t.isStratrunner?a("div",{staticClass:"row"},[a("roundtrips",{staticClass:"col-12",attrs:{roundtrips:t.roundtrips}})],1):t._e()]:t._e()],2)},i=[];s._withStripped=!0;a("96cf");var r=a("c973"),n=a.n(r),o=(a("7514"),a("ac6a"),a("cadf"),a("2b0e")),c=a("c1df"),l=a.n(c),d=a("8f14"),u=a.n(d),v=a("2ef0"),h=a.n(v),g=a("1a90"),f=a("bdfd"),p={created:function(){this.isLoading||this.getCandles()},components:{echart:g["a"],roundtrips:f["a"]},data:function(){return{candleFetch:"idle",candles:[]}},computed:{id:function(){return this.$route.params.id},historySize:function(){return(this.config.tradingAdvisor.candleSize||0)*(this.config.tradingAdvisor.historySize||0)},historyFormula:function(){return"(".concat(this.config.tradingAdvisor.historySize," x ").concat(this.config.tradingAdvisor.candleSize," min.)")},gekkos:function(){return this.$store.getters["gekkos/list"]},archivedGekkos:function(){return this.$store.getters["gekkos/archive"]},watchers:function(){return h.a.values(this.$store.getters["gekkos/list"]).concat(h.a.values(this.$store.getters["gekkos/archive"])).filter(function(t){return"watcher"===t.logType})},data:function(){return!!this.gekkos&&(h.a.has(this.gekkos,this.id)?this.gekkos[this.id]:!!h.a.has(this.archivedGekkos,this.id)&&this.archivedGekkos[this.id])},config:function(){return h.a.get(this,"data.config")},latestEvents:function(){return h.a.get(this,"data.events.latest")},lastCompletedTrade:function(){return h.a.get(this,"data.events.latest.tradeCompleted")},initialEvents:function(){return h.a.get(this,"data.events.initial")},trades:function(){return h.a.get(this,"data.events.tradeCompleted")||[]},roundtrips:function(){return h.a.get(this,"data.events.roundtrip")||[]},isLive:function(){return h.a.has(this.gekkos,this.id)},type:function(){return this.data.logType},isStratrunner:function(){return"watcher"!==this.type},isArchived:function(){return this.data.stopped},warmupRemaining:function(){if(!this.isStratrunner)return!1;if(this.isArchived)return!1;if(this.initialEvents.stratWarmupCompleted)return!1;if(!this.initialEvents.candle)return!1;var t=h.a.get(this.config,"tradingAdvisor.historySize");if(!t)return!1;var e=h.a.get(this.config,"tradingAdvisor.candleSize")*t;return u()(l()(this.initialEvents.candle.start).add(e,"m").diff(l()()),{largest:2})},report:function(){return h.a.get(this.latestEvents,"performanceReport")},stratName:function(){if(this.data)return this.data.config.tradingAdvisor.method},stratParams:function(){if(!this.data)return"Loading...";var t=o["a"].util.extend({},this.data.config[this.stratName]);return delete t.__empty,h.a.isEmpty(t)?"No parameters":JSON.stringify(t,null,4)},isLoading:function(){return!this.data||(!h.a.get(this.data,"events.initial.candle")||!h.a.get(this.data,"events.latest.candle"))},watcher:function(){var t=this;if(!this.isStratrunner)return!1;var e=o["a"].util.extend({},this.data.config.watch);return h.a.find(this.gekkos,function(a){return a.id!==t.id&&h.a.isEqual(e,a.config.watch)})},hasLeechers:function(){var t=this;if(this.isStratrunner)return!1;var e=o["a"].util.extend({},this.data.config.watch);return h.a.find(this.gekkos,function(a){return a.id!==t.id&&h.a.isEqual(e,a.config.watch)})},dataSpanning:function(){return u()(l()(this.latestEvents.candle.start).diff(l()(this.initialEvents.candle.start)))||""}},watch:{"data.events.latest.candle.start":function(){this.getCandles()},data:function(t,e){var a=t&&t.events.initial.candle&&t.events.latest.candle;a&&"fetched"!==this.candleFetch&&this.getCandles()}},methods:{round:function(t){return(+t).toFixed(5)},moment:function(t){return l.a.utc(t)},fmt:function(t){return l.a.utc(t).format("YYYY-MM-DD HH:mm")},getCandles:function(){var t=n()(regeneratorRuntime.mark(function t(){var e,a,s,i,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.isLoading){t.next=2;break}return t.abrupt("return");case 2:if("fetching"!==this.candleFetch){t.next=4;break}return t.abrupt("return");case 4:return this.candleFetch="fetching",e=this.data.events.latest.candle.start,a=this.data.events.initial.candle.start,s=1,"watcher"!==this.type&&(s=this.data.config.tradingAdvisor.candleSize),i={watch:this.data.config.watch,daterange:{to:e,from:a},candleSize:s},t.prev=10,t.next=13,this.$axios.post("".concat(this.$store.state.config.apiBaseUrl,"getCandles"),i);case 13:if(r=t.sent,this.candleFetch="fetched",h.a.isArray(r.data)){t.next=17;break}return t.abrupt("return",console.log("No data retrieved!"));case 17:this.candles=r.data.map(function(t){return t.start=l.a.unix(t.start).utc().format(),t}),t.next=24;break;case 20:return t.prev=20,t.t0=t["catch"](10),console.log("Error on getting candle Data",t.t0),t.abrupt("return");case 24:case"end":return t.stop()}},t,this,[[10,20]])}));return function(){return t.apply(this,arguments)}}(),stopGekko:function(){var t=this;if(this.hasLeechers)return this.$q.dialog({title:"Dependant Gekkos found",message:"This Gekko is fetching market data fÃ¼r multiple stratrunners. Stop these first!",type:"warning"});this.$q.dialog({title:"Stop Gekko",message:"Are you sure you wand to stop this Gekko?",ok:"Yes",cancel:"No"}).then(n()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post("".concat(t.$store.state.config.apiBaseUrl,"stopGekko"),{id:t.data.id});case 3:e.sent,t.$q.notify("Gekko has been stopped."),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),t.$q.notify("Error - could not stop Gekko."),console.log("Error stopping gekko",e.t0);case 11:case"end":return e.stop()}},e,this,[[0,7]])}))).catch(function(){})},deleteGekko:function(){var t=this;if(!this.isArchived)return this.$q.dialog({title:"Still running!",message:"This Gekko is still running. Stop it first!",type:"warning"});this.$q.dialog({title:"Delete Gekko",message:"Are you sure you wand to delete this Gekko?",ok:"Yes",cancel:"No"}).then(n()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$axios.post("".concat(t.$store.state.config.apiBaseUrl,"deleteGekko"),{id:t.data.id});case 3:e.sent,t.$q.notify("Gekko has been deleted. Redirecting..."),t.$router.push({path:"/live-gekkos/"}),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$q.notify("Error - could not delete Gekko."),console.log("Error deleteing gekko",e.t0);case 12:case"end":return e.stop()}},e,this,[[0,8]])}))).catch(function(){})}}},_=p,k=a("2877"),m=Object(k["a"])(_,s,i,!1,null,null,null);m.options.__file="singleGekko.vue";e["default"]=m.exports}}]);